{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport axios from 'axios';\n\nconst API_KEY = '45808598-d89d2298a0dffc9605af6e928';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (\n  word,\n  page,\n  per_page = 15,\n  orientation = 'horizontal'\n) => {\n  try {\n    const axiosOptions = {\n      params: {\n        key: API_KEY,\n        q: word,\n        page,\n        orientation,\n        per_page,\n        image_type: 'photo',\n        safesearch: 'true',\n      },\n    };\n\n    const axiosResopne = await axios.get('', axiosOptions);\n\n    const data = axiosResopne.data;\n    if (data.hits.length === 0) {\n      iziToast.error({\n        position: 'topLeft',\n        message:\n          'Sorry, there are no images matching your search query. Please, try again!',\n      });\n      throw new Error('No images found');\n    }\n\n    return data;\n  } catch {\n    console.log(err);\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\n\nexport const renderImages = (images, gallery) => {\n  const createCard = images\n    .map(img => {\n      return `<li class=\"photo-card\">\n  <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n    <div class=\"card-content\">\n      <img class=\"gallery-image\" src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n      <ul class=\"card-info-list\">\n        <li class=\"info-item\">\n          <p class=\"info-description\">Likes</p>\n          <p class=\"info-description-value\">${img.likes}</p>\n        </li>\n        <li class=\"info-item\">\n          <p class=\"info-description\">Views</p>\n          <p class=\"info-description-value\">${img.views}</p>\n        </li>\n        <li class=\"info-item\">\n          <p class=\"info-description\">Comments</p>\n          <p class=\"info-description-value\">${img.comments}</p>\n        </li>\n        <li class=\"info-item\">\n          <p class=\"info-description\">Downloads</p>\n          <p class=\"info-description-value\">${img.downloads}</p>\n        </li>\n      </ul>\n    </div>\n  </a>\n</li>\n\n`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', createCard);\n\n  let galleryLibrary = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  galleryLibrary.refresh();\n};\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\nimport iziToast from 'izitoast';\n\nlet currentPage = 1;\nlet searchQuery = '';\nlet imagesPerPage = 15;\nlet galleryItemHeight = 0;\n// let totalPages = 4;\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.input-seach');\nconst gallery = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreEl = document.querySelector('.js-loadmore');\nconst scrollEl = document.querySelector('.scroll-to-top');\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n  loadMoreEl.classList.add('is-hidden');\n  searchQuery = input.value.trim();\n  gallery.innerHTML = '';\n\n  if (searchQuery === '') {\n    iziToast.error({\n      position: 'topLeft',\n      message:\n        'Sorry, the field must not contain only spaces. Please, try again!',\n    });\n\n    form.reset();\n\n    return;\n  }\n\n  loaderEl.classList.remove('is-hidden');\n  currentPage = 1;\n\n  try {\n    const response = await fetchImages(searchQuery, currentPage, imagesPerPage);\n    input.value = '';\n    loaderEl.classList.add('is-hidden');\n    if (response.hits.length !== 0) {\n      renderImages(response.hits, gallery);\n    }\n\n    loadMoreEl.classList.remove('is-hidden');\n  } catch {\n    loaderEl.classList.add('is-hidden');\n    input.value = '';\n    console.error('Error fetching images:', error);\n  }\n};\n\nconst onLoadMore = async event => {\n  try {\n    currentPage++;\n\n    loadMoreEl.classList.add('is-hidden');\n    loaderEl.classList.remove('is-hidden');\n\n    const data = await fetchImages(searchQuery, currentPage, imagesPerPage);\n    if (data.hits.length !== 0) {\n      renderImages(data.hits, gallery);\n    }\n\n    const totalPages = Math.ceil(data.total / imagesPerPage);\n    galleryItemHeight = gallery\n      .querySelector('li')\n      .getBoundingClientRect().height;\n\n    scrollBy({\n      top: galleryItemHeight * 2,\n      behavior: 'smooth',\n    });\n\n    loadMoreEl.classList.remove('is-hidden');\n    loaderEl.classList.add('is-hidden');\n    if (currentPage >= totalPages) {\n      loadMoreEl.classList.add('is-hidden');\n      iziToast.info({\n        position: 'topLeft',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (err) {\n    loadMoreEl.classList.remove('is-hidden');\n    loaderEl.classList.add('is-hidden');\n    console.log(err);\n  }\n};\n\nwindow.onscroll = function () {\n  scrollFunction();\n};\n\nconst scrollFunction = event => {\n  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {\n    scrollEl.style.display = 'block';\n  } else {\n    scrollEl.style.display = 'none';\n  }\n};\n\nconst topFunction = event => {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n};\n\nform.addEventListener('submit', onSearchFormSubmit);\nloadMoreEl.addEventListener('click', onLoadMore);\nscrollEl.addEventListener('click', topFunction);\n"],"names":["API_KEY","axios","fetchImages","word","page","per_page","orientation","axiosOptions","data","iziToast","renderImages","images","gallery","createCard","img","SimpleLightbox","currentPage","searchQuery","imagesPerPage","galleryItemHeight","form","input","loaderEl","loadMoreEl","scrollEl","onSearchFormSubmit","event","response","onLoadMore","totalPages","err","scrollFunction","topFunction"],"mappings":"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"}